> Notes for Regular Expression

1. 提取连续重复的字符

    ```javascript
    const collectRepeatStr = (str) => {
      let repeatStrs = [];
      const repeatRe = /(.+)\1+/g;
      str.replace(repeatRe, ($0, $1) => {
        $1 && repeatStrs.push($1);
      })
      return repeatStrs;
    }
    ```

2. 实现一个trim函数

    ```javascript
    // 去除空格法
    const trim = (str) => {
      return str.replace(/^\s*|\s*$/g, '');
    }

    // 提取非空格法
    const trim = (str) => {
      return str.replace(/^\s*(.*?)\s*$/g, '$1');
    }
    ```

3. 数字价格千分位分割

    ```javascript
    '123456789'.replace(/(?!^)(?=(\d{3})+$)/g, ','); // 123,456,789
    ```

4. 手机号3-4-4分割

    ```javascript
    let mobile = '18379836654';
    let mobileReg = /(?=(\d{4})+$)/g;
    console.log(mobile.replace(mobileReg, '-')); // 183-7983-6654
    ```

5. 将字符串驼峰化

    ```javascript
    const camelCase = (string) => {
      const camelCaseRegex = /[-_\s]+(.)?/g;
      return string.replace(camelCaseRegex, (match, char) => {
        return char ? char.toUpperCase() : '';
      });
    }
    ```

6. 将字符串首字母转化为大写，剩下为小写

    ```javascript
    const capitalize = (string) => {
      const capitalizeRegex = /(?:^|\s+)\w/g;
      return string.toLowerCase().replace(capitalizeRegex, (match) => match.toUpperCase());
    }
    ```

7. 通过name获取url query参数

    ```javascript
    const getQueryByName = (name) => {
      const queryNameRegex = new RegExp(`[?&]${name}=([^&]*)(&|$)`);
      const queryNameMatch = window.location.search.match(queryNameRegex);
      // 一般都会通过decodeURIComponent解码处理
      return queryNameMatch ? decodeURIComponent(queryNameMatch[1]) : '';
    }
    ```

8. 电子邮件

    ```javascript
    const reg1 = /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/g;
    const reg2 = /^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/g;
    let str = 'yequanrui@qq.com';
    console.log(reg1.test(str)); // true
    console.log(reg2.test(str)); // true
    ```

9. 密码

    ```javascript
    // 第一个字符必须是字母
    // 必须包含至少8个字符且不超过20个字符
    // 不能使用除字母、数字和下划线以外的字符
    const reg1 = /^[a-zA-Z]\w{8,20}$/g;
    // 至少8个字符
    // 至少1个数字字符
    // 至少1个小写字母
    // 至少1个大写字母
    // 至少1个特殊字符
    const reg2 = /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[^\w\s]).{8,}$/g;
    ```

10. 网址

    ```javascript
    // 检查字符串是否为URL
    const reg = /https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#()?&//=]*)/g;
    ```

11. IP地址

    ```javascript
    // IPv4
    const reg1 = /^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g;
    // IPv6
    const reg2 = /(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/g;
    ```

12. 日期

    ```javascript
    // 日期格式YYYY-MM-dd使用分隔符（-）
    const reg1 = /([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/g;
    // 日期格式dd-MM-YYYY使用分隔符（- . /）
    const reg2 = /^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/g;
    ```

13. HTML标签

    ```javascript
    // 将HTML标记与属性匹配
    const reg = /<\/?[\w\s]*>|<.+[\W]>/g;
    console.log(reg.test('<html>')); // true
    console.log(reg.test('<div class"test">')); // true
    console.log(reg.test('</div>')); // true
    console.log(reg.test('<ss/div>')); // false
    console.log(reg.test('<div')); // false
    ```

14. 电话号码

    ```javascript
    // 将HTML标记与属性匹配
    const reg = /^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]\d{3}[\s.-]\d{4}$/g;
    console.log(reg.test('123-456-7890')); // true
    console.log(reg.test('(123) 456-7890')); // false
    console.log(reg.test('123 456 7890')); // true
    console.log(reg.test('123.456.7890')); // false
    console.log(reg.test('+91 (123) 456-7890')); // true
    ```

### 一、校验数字的表达式  

1. 数字：`^[0-9]*$`

2. n位的数字：`^\d{n}$`

3. 至少n位的数字：`^\d{n,}$`

4. m-n位的数字：`^\d{m,n}$`

5. 零和非零开头的数字：`^(0|[1-9][0-9]*)$`

6. 非零开头的最多带两位小数的数字：`^([1-9][0-9]*)+(.[0-9]{1,2})?$`

7. 带1-2位小数的正数或负数：`^(\-)?\d+(\.\d{1,2})?$`

8. 正数、负数、和小数：`^(\-|\+)?\d+(\.\d+)?$`

9. 有两位小数的正实数：`^[0-9]+(.[0-9]{2})?$`

10. 有1~3位小数的正实数：`^[0-9]+(.[0-9]{1,3})?$`

11. 非零的正整数：`^[1-9]\d*$ 或 ^([1-9][0-9]*){1,3}$ 或 ^\+?[1-9][0-9]*$`

12. 非零的负整数：`^\-[1-9][]0-9"*$ 或 ^-[1-9]\d*$`

13. 非负整数：`^\d+$ 或 ^[1-9]\d*|0$`

14. 非正整数：`^-[1-9]\d*|0$ 或 ^((-\d+)|(0+))$`

15. 非负浮点数：`^\d+(\.\d+)?$ 或 ^[1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0$`

16. 非正浮点数：`^((-\d+(\.\d+)?)|(0+(\.0+)?))$ 或 ^(-([1-9]\d*\.\d*|0\.\d*[1-9]\d*))|0?\.0+|0$`

17. 正浮点数：`^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$ 或 ^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$`

18. 负浮点数：`^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$ 或 ^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$`

19. 浮点数：`^(-?\d+)(\.\d+)?$ 或 ^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$`

## 二、校验字符的表达式

1. 汉字：`^[\u4e00-\u9fa5]{0,}$`

2. 英文和数字：`^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]{4,40}$`

3. 长度为3-20的所有字符：`^.{3,20}$`

4. 由26个英文字母组成的字符串：`^[A-Za-z]+$`

5. 由26个大写英文字母组成的字符串：`^[A-Z]+$`

6. 由26个小写英文字母组成的字符串：`^[a-z]+$`

7. 由数字和26个英文字母组成的字符串：`^[A-Za-z0-9]+$`

8. 由数字、26个英文字母或者下划线组成的字符串：`^\w+$ 或 ^\w{3,20}`

9. 中文、英文、数字包括下划线：`^[\u4E00-\u9FA5A-Za-z0-9_]+$`

10. 中文、英文、数字但不包括下划线等符号：`^[\u4E00-\u9FA5A-Za-z0-9]+$ 或 ^[\u4E00-\u9FA5A-Za-z0-9]{2,20}$`

11. 可以输入含有`^%&',;=?$\"`等字符：`[^%&',;=?$\x22]+`

12. 禁止输入含有~的字符`[^~\x22]+`

### 其它

`.*`匹配除 `\n` 以外的任何字符。

`/[\u4E00-\u9FA5]/` 汉字

`/[\uFF00-\uFFFF]/` 全角符号

`/[\u0000-\u00FF]/` 半角符号

## 三、特殊需求表达式

1. Email地址：`^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$`

2. 域名：`[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(/.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+/.?`

3. InternetURL：`[a-zA-z]+://[^\s]* 或 ^http://([\w-]+\.)+[\w-]+(/[\w-./?%&=]*)?$`

4. 手机号码：`^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$`

5. 电话号码("XXX-XXXXXXX"、"XXXX-XXXXXXXX"、"XXX-XXXXXXX"、"XXX-XXXXXXXX"、"XXXXXXX"和"XXXXXXXX)：`^(\(\d{3,4}-)|\d{3.4}-)?\d{7,8}$`

6. 国内电话号码(0511-4405222、021-87888822)：`\d{3}-\d{8}|\d{4}-\d{7}`

7. 身份证号(15位、18位数字)：`^\d{15}|\d{18}$`

8. 短身份证号码(数字、字母x结尾)：`^([0-9]){7,18}(x|X)?$ 或 ^\d{8,18}|[0-9x]{8,18}|[0-9X]{8,18}?$`

9. 帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：`^[a-zA-Z][a-zA-Z0-9_]{4,15}$`

10. 密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：`^[a-zA-Z]\w{5,17}$`

11. 强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)：`^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$`

12. 日期格式：`^\d{4}-\d{1,2}-\d{1,2}`

13. 一年的12个月(01～09和1～12)：`^(0?[1-9]|1[0-2])$`

14. 一个月的31天(01～09和1～31)：`^((0?[1-9])|((1|2)[0-9])|30|31)$`

### 钱的输入格式

1. 有四种钱的表示形式我们可以接受:"10000.00" 和 "10,000.00", 和没有 "分" 的 "10000" 和 "10,000"：`^[1-9][0-9]*$`

2. 这表示任意一个不以0开头的数字,但是,这也意味着一个字符"0"不通过,所以我们采用下面的形式：`^(0|[1-9][0-9]*)$`

3. 一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：`^(0|-?[1-9][0-9]*)$`

4. 这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉,因为钱总不能是负的吧.下面我们要加的是说明可能的小数部分：`^[0-9]+(.[0-9]+)?$`

5. 必须说明的是,小数点后面至少应该有1位数,所以"10."是不通过的,但是 "10" 和 "10.2" 是通过的：`^[0-9]+(.[0-9]{2})?$`

6. 这样我们规定小数点后面必须有两位,如果你认为太苛刻了,可以这样：`^[0-9]+(.[0-9]{1,2})?$`

7. 这样就允许用户只写一位小数.下面我们该考虑数字中的逗号了,我们可以这样：`^[0-9]{1,3}(,[0-9]{3})*(.[0-9]{1,2})?$`

8. 1到3个数字,后面跟着任意个 逗号+3个数字,逗号成为可选,而不是必须：`^([0-9]+|[0-9]{1,3}(,[0-9]{3})*)(.[0-9]{1,2})?$`

9. xml文件：`^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x|X][m|M][l|L]$`

10. 中文字符的正则表达式：`[\u4e00-\u9fa5]`

11. 双字节字符：`[^\x00-\xff]` (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))

12. 空白行的正则表达式：`\n\s*\r` (可以用来删除空白行)

13. HTML标记的正则表达式：`<(\S*?)[^>]*>.*?</\1>|<.*? />` (网上流传的版本太糟糕，上面这个也仅仅能部分，对于复杂的嵌套标记依旧无能为力)

14. 首尾空白字符的正则表达式：`^\s*|\s*$或(^\s*)|(\s*$)` (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)

15. 腾讯QQ号：`[1-9][0-9]{4,}` (腾讯QQ号从10000开始)

16. 中国邮政编码：`[1-9]\d{5}(?!\d)` (中国邮政编码为6位数字)

17. IP地址：`\d+\.\d+\.\d+\.\d+` (提取IP地址时有用)

18. IP地址：`((?:(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d))`

19. IP-v4地址：`\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b` (提取IP地址时有用)

20. 校验IP-v6地址:`(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))`

21. 子网掩码：`((?:(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d))`

22. 校验日期:`^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$`(“yyyy-mm-dd“ 格式的日期校验，已考虑平闰年。)

23. 抽取注释：`<!--(.*?)-->`

24. 查找CSS属性:`^\\s*[a-zA-Z\\-]+\\s*[:]{1}\\s[a-zA-Z0-9\\s.#]+[;]{1}`

25. 提取页面超链接:`(<a\\s*(?!.*\\brel=)[^>]*)(href="https?:\\/\\/)((?!(?:(?:www\\.)?'.implode('|(?:www\\.)?', $follow_list).'))[^" rel="external nofollow" ]+)"((?!.*\\brel=)[^>]*)(?:[^>]*)>`

26. 提取网页图片:`\\< *[img][^\\\\>]*[src] *= *[\\"\\']{0,1}([^\\"\\'\\ >]*)`

27. 提取网页颜色代码:`^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$`

28. 文件扩展名效验:`^([a-zA-Z]\\:|\\\\)\\\\([^\\\\]+\\\\)*[^\\/:*?"<>|]+\\.txt(l)?$`

29. 判断IE版本：`^.*MSIE [5-8](?:\\.[0-9]+)?(?!.*Trident\\/[5-9]\\.0).*$`

### 附表

![图片](https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbufndG3m3Odth7t4Uku459PC67neGZ425peCPYXC9OKrLr9kRBdCjLbElZbQNtOibye9qsP08tvBR9A/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)  

![图片](https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbufndG3m3Odth7t4Uku459PC10t4Hujwia7AIiage1jJ4icDXbg07wSibAJgvqs00sg1yQocFpVX3t667A/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

![图片](https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbufndG3m3Odth7t4Uku459PC49ulu1a6RmqgKRcLRpEtrpeTBllJvt4Pd0icP2njxxUSEicreY125KGQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

![图片](https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbufndG3m3Odth7t4Uku459PCyjQhlcsO3SVOmBmxNN7lIfNfnHys7hxlicedf8aLAOUBlfcSGP3uibiaA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

![图片](https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbufndG3m3Odth7t4Uku459PC7KFmevIEwPz25nvlptWCqWmjdnsDQTMGVc6VIib3A3icw9kN5BSupmOQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

![图片](https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbufndG3m3Odth7t4Uku459PC2sx0J0UZEfrAk7bA6mOFIDViaddEffopAuw6sXXvbqnHYibkbBdf8ic4w/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

![图片](https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbufndG3m3Odth7t4Uku459PCURqGIY61icvGlhmib8dvG3gwT7Rdiay5VIf6mRICQFfGpff0ia4DILJWMg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

![图片](https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbufndG3m3Odth7t4Uku459PCPicytQUVee0j8NS6eYWJicaT8bzAAAKPNfRHhRDArlDaEumOqeX6vnEA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)![图片](https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbufndG3m3Odth7t4Uku459PCYJf59Yic4ACLXgGnWLeg5BP46AjaRiat9ZQHabaXovdMrsVAEv87Y3Sg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

![图片](https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbufndG3m3Odth7t4Uku459PCaIVfq9ntr8kxNRxVh9Orv5mSHBK5BlbiaGKjZqtNkicQrRXiclPENlvEw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)
